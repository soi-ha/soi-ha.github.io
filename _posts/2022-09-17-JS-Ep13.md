---
layout: post
categories:
  - TIL
title: "JavaScript: JS 데이터 실습 Ep.12 (storage, OMDb API)"
tags:
  - TIL
  - JS
---

## __Storage__
---
개발자 도구 → Application (console 옆) → Storage → Local, Session Storage → 도메인 주소

- __Local Storage__  
  Key Value 형태로 데이터 저장한다.  
  저장한 데이터는 브라우저 세션 간에 공유한다.  
  로컬 스토리지에 저장되는 데이터는 해당하는 도메인 주소에 종속되어 저장이 된다. (즉, 하나의 사이트에 종속이 됨)  
  데이터를 따로 지우지 않는 한, 데이터는 만료되지 않는다. (반영구적)
    
- __Session Storage__  
  Key Value 형태로 데이터 저장한다.  
  페이지의 세션이 끝날때, 즉 페이지를 닫을 때 데이터도 모두 사라진다.

### __메소드__

- __localStorage.setItem__  
  setItem 메소드를 사용하여 데이터를 저장한다.  
  localStorage라는 전역 객체를 사용해서 setItem이라는 메소드 실행한다.  
  첫번째 인수는 Key, 두번째 인수는 Value이다. (하나의 데이터!)  
  데이터는 되도록 문자 데이터로 저장하는 것이 좋으며, 문자 데이터가 아닐 경우엔 저장이 되지 않을 수도 있다.
  ```js
  localStorage.setItem('myCat', 'Tom');
  ```
  - 추가! 객체, 배열 데이터를 문자 데이터로 변환하기! (지난 JSON 글 참고)  
    객체, 배열 데이터 같은 경우는 JSON 객체의 stringify를 통해서 문자 데이터화 시켜서 데이터를 저장한다. 이렇게 저장된 문자 데이터를 가져와서 JSON 객체의 parse 메소드를 통해서 분석하여 자바스크립트 파일 내에서 하나의 데이터로 활용할 수 있다.
        
- __localStorage.getItem__  
  특정한 데이터를 읽어오는 용도로만 사용할때 getItem 메소드를 사용한다.  
  getItem은 해당하는 데이터의 속성값 (key값)만 알면 된다.   
  인수는 key값 하나만 적으면 해당 메소드를 통해 데이터를 읽어올 수 있다.
  ```js
  const cat = localStorage.getItem('myCat');
  ```
    
- __localStorage.removeItem__  
  원하는 데이터 값을 지울때 사용한다.
  ```js
  localStorage.removeItem('myCat');
  ```
    

### __실습하기__
```js
const user = {
	name: 'Soha',
	age: 45,
	emails: [
		'soha@gmail.com',
		'neo@naver.com'
	]
}

localStorage.setItem('user', user)

// local Storage
// Key: User Value: [object Object]
```

__setItem__
  - 원하던 value값이 저장되지 않았다.  
    문자 데이터로 변환을 해줘야 한다.
    ```js
    localStorage.setItem('user', user)
    
    // local Storage
    // Key: User Value: [object Object]
    ```
      
  - 문자 데이터화 시키기  
    ```js
    localStorage.setItem('user', JSON.stringify(user))
    
    // local Storage
    // Key: User 
    // Value: {name: 'Soha',age: 45,emails: ['soha@gmail.com','neo@naver.com']}
    ```
        
__getItem__
  - 로컬스토리지에서 가져오기
    ```js
      console.log(localStorage.getItem('user'))
    
    // console 창
    // {"name": "Soha","age": 45,"emails": ["soha@gmail.com","neo@naver.com"]}
    ```
      
  - 객체 데이터로 변환하기
    ```js
      console.log(JSON.parse(localStorage.getItem('user')))
    
    // console 창
    // {name: 'Soha',age: 45,emails: ['soha@gmail.com','neo@naver.com']}
    ```
        
__removeItem__
  - 로컬 스토리지의 데이터 지우기
    ```js
      localStorage.removeItem('user')
    // local Storage
    // Key: <공란> Value: <공란>
    ```
        
__로컬 스토리지의 데이터 수정하기__  
  로컬 스토리지에 있는 데이터를 수정하기 위해서는 데이터를 가져와서 수정을 한 후, 다시 해당하는 Key의 이름으로 덮어쓰기를 하면 된다.
  
  일단, 로컬 스토리지에서 해당 데이터를 가져와서 변수에 할당해준다.   
  parse를 통해 객체 데이터로 변환을 한 것을 obj 변수에 할당한다.  
  해당 객체 데이터의 age 값을 22로 변경한다.  
  변경한 변수(obj)를 user에 다시 넣어주면! → 저장이 안된다.  
  obj는 자바스크립트에서 사용하고 있는 하나의 **객체 데이터**이기 때문에 **문자 데이터**로 **변환**을 한 후, 저장을 해야 한다.
  ```js
  const str = localStorage.getItem('user')
  const obj = JSON.parse(str)
  obj.age = 22
  
  localStorage.setItem('user',JSON.stringify(obj))
  
  // local Storage
  // Key: User 
  // Value: {name: 'Soha',age: 22,emails: ['soha@gmail.com','neo@naver.com']}
  ```